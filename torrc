# Tor configuration file for a hidden service with webtunnel bridges.
# This file defines how Tor should operate for this specific service.

# --- Hidden Service Configuration ---
# Specifies the directory where Tor will store its hidden service data,
# including the private keys and the 'hostname' file containing the .onion address.
# This directory must have strict permissions (700) and be owned by the 'debian-tor' user.
HiddenServiceDir /var/lib/tor/hidden_service/

# Defines a hidden service port mapping.
# It maps the external port 80 of the .onion address to the internal
# address and port (127.0.0.1:80) within the Docker container.
# This means traffic arriving at the hidden service's port 80 will be
# forwarded to Caddy, which is listening on 127.0.0.1:80 inside the container.
HiddenServicePort 80 127.0.0.1:80

# --- Logging Configuration ---
# Sets the logging level to 'notice' and directs logs to a file.
# This can be useful for debugging Tor's operation.
# Other levels include 'debug', 'info', 'warn', 'err'.
Log notice file /var/log/tor/notices.log

# --- Bridge Configuration (for Circumvention/Obscurity) ---
# Enables the use of Tor bridges. Bridges are unlisted Tor relays that help
# users (or hidden services, in this case) connect to the Tor network
# even if their internet service provider or government is trying to block direct Tor connections.
UseBridges 1

# Add webtunnel bridges
# IMPORTANT: The bridge addresses and URLs provided here are examples.
# Bridges can become blocked or change over time. For a production service,
# it is highly recommended to obtain fresh, unblocked bridges from:
# - BridgeDB: https://bridges.torproject.org/
# - Email: Send an email to bridges@torproject.org from a Gmail, Riseup, or Yahoo email account.
#
Bridge webtunnel [2001:db8:b260:52a8:6a2:a93a:6c69:8fcb]:443 2307A05F4EA0E8E215100D3934157213E564AE7E url=https://z.igrp.site/eg9PbqaxSvIbjtbVZMt9H7xF ver=0.0.1
Bridge webtunnel [2001:db8:75db:c6f2:1dae:121:7a04:9e9d]:443 4B673DF159CFC12AC91FC2E6AC3047FF2183FCEA url=http://freifunk.ckgc.de/xBKEzZunnc3A5pcf6jaeVyPL ver=0.0.1
